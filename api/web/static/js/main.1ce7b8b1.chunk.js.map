{"version":3,"sources":["../node_modules/suneditor/src/lang sync /^/.//.*/.js$","data/external-tools.js","components/icons/CreateNarrativeContextIcon.jsx","components/Home.jsx","utils/id-generator.js","utils/array-utils.js","models/base-element.js","models/paragraph-element.js","models/container-element.js","models/shop-item.js","models/shop-element.js","utils/elements-factory.js","models/narrative-category.js","models/narrative-context.js","components/CreateNarrativeContext.jsx","components/icons/CreateIcon.jsx","components/icons/ScrollIcon.jsx","components/icons/FolderIcon.jsx","components/icons/ShopIcon.jsx","components/CreateElementButton.jsx","components/icons/RenameIcon.jsx","components/icons/MoveUpIcon.jsx","components/icons/MoveDownIcon.jsx","components/icons/DeleteIcon.jsx","components/ElementListItem.jsx","components/NarrativeCategoryComponent.jsx","components/ViewNarrativeContext.jsx","models/database.js","config.js","repositories/web-api-repository.js","repositories/db-sync-repository.js","repositories/db-repository.js","components/RichTextEditor.jsx","components/ParagraphElementComponent.jsx","components/ShopTableEditor.jsx","components/ShopElementComponent.jsx","components/icons/EditIcon.jsx","components/icons/CopyLinkIcon.jsx","components/ViewElement.jsx","components/Navbar.jsx","repositories/auth-repository.js","components/LoginView.jsx","components/LogoutView.jsx","App.jsx","app-context.js","services/data-corruption-preventer.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","EXTERNAL_TOOLS","name","url","CreateNarrativeContextIcon","icon","faFolderPlus","color","Home","appContext","navigate","useNavigate","useState","campaigns","setCampaigns","worlds","setWorlds","useEffect","setNarrativeContextById","setBackButtonUrl","setForwardButtonUrl","db","getDB","className","onClick","role","aria-label","x","key","to","href","IdGenerator","uuidv4","ArrayUtils","arr","old_index","new_index","length","k","push","undefined","splice","BaseElement","type","this","generateId","data","TYPES","PARAGRAPH","CONTAINER","SHOP","ParagraphElement","body","json","ContainerElement","elements","elementId","find","element","getElement","indexOf","oldIndex","newIndex","moveElementInArray","findInChild","found","plainElements","concat","getPlainViewableElements","toJson","ElementsFactory","mapElementFromJson","ShopItem","title","price","link","amount","fromJson","instance","ShopElement","items","_ELEMENT_TYPES_MAPPING","NarrativeCategory","viewableElements","_getPlainViewableElements","index","NarrativeContext","categories","categoryId","category","getNarrativeCategory","CreateNarrativeContext","setName","setType","placeholder","onChange","event","target","value","narrativeContext","addNarrativeContext","saveDB","CreateIcon","faPlus","ScrollIcon","faScroll","FolderIcon","faFolderOpen","ShopIcon","faShoppingCart","CreateElementButton","dropdownBody","useRef","onDropdownElementClick","current","classList","toggle","ref","RenameIcon","faTag","MoveUpIcon","faLevelUpAlt","MoveDownIcon","faLevelDownAlt","DeleteIcon","faTrashAlt","ElementListItem","narrativeContextId","narrativeCategoryId","onMoveElementUp","onMoveElementDown","onDeleteElement","onRenameElement","onChildUpdate","isContainer","deleteChildElement","childElement","window","confirm","removeElement","moveChildElementUp","moveElementUp","moveChildElementDown","moveElementDown","renameChildElement","prompt","icons","getIcon","newElement","createElement","addElement","chileElement","NarrativeCategoryComponent","narrativeCategory","onCategoryChange","moveCategoryUp","moveCategoryDown","elementsState","setElementsState","rerender","setTimeout","deleteElement","renameElement","removeNarrativeCategory","ViewNarrativeContext","useParams","setNarrativeContext","narrativeContextCategories","setNarrativeContextCategories","obtainedNarrativeContext","getNarrativeContext","moveNarrativeCategoryUp","moveNarrativeCategoryDown","categoryName","addNarrativeCategory","removeNarrativeContext","Database","addWorld","addCampaign","narrativeContextsList","world","campaign","WEB_API_URL","location","origin","WebApiRepository","localStorage","getItem","endpoint","a","headers","authToken","_get_token","fetch","method","response","ok","JSON","stringify","DBSyncRepository","_get","dbJson","_post","DBRepository","_loadOrCreateLocalDB","_tryDownloadCloudDB","hook","_onCloudDBDownloadedHooks","_afterSaveHooks","callback","_onDirtyDBCallback","_preventSave","_save","_db","loadedDB","_DB_KEY","parse","console","log","_dbSyncRepository","pullDB","downloadedDB","saveInCloud","setItem","_callAfterSaveHooks","pushDB","RichTextEditor","initialValue","editor","lang","defaultValue","height","state","getContents","onInput","getSunEditorInstance","sunEditor","setOptions","buttonList","formats","tag","ParagraphElementComponent","parentExposedFuntions","editMode","setEditMode","currentEditorValue","hasChangedAtLeastOneTime","discardChanges","edit","getRepository","save","dangerouslySetInnerHTML","__html","ShopTableEditor","onItemsChange","clone","itemsList","setItemsList","updateItemProp","item","prop","addItem","parseInt","ShopElementComponent","currentEditorItems","childFunctions","EditIcon","faEdit","CopyLinkIcon","faLink","ViewElement","setElement","childFuntions","obtainedElement","findElementAnywhere","prevElement","getPrevElement","nextElement","getNextElement","setNavigationButtons","relLink","navigator","clipboard","writeText","onDelete","Navbar","backButtonUrl","forwardButtonUrl","faDiceD20","faAngleLeft","faAngleRight","AuthRepository","onLogin","onLogout","credentials","token","username","removeItem","LoginView","setUsername","password","setPassword","login","alert","onSubmit","preventDefault","LogoutView","logout","App","authRepo","isAuthenticated","userLogged","path","AppContext","_repositories","repositoryClass","DataCorruptionPreventer","_appContext","_interval","_INTERVAL_TIME","_lastDBSaveTime","_LAST_SAVE_DATE_KEY","_getStoredDate","_registerAfterSaveHook","_registerOnDirtyDBCallback","registerAfterSaveHook","_updateLastSaveInfo","registerOnDirtyDBCallback","_onDirtyDB","saveDate","Date","toString","lastSaveDateStr","storedDate","setInterval","_isWorkingDirty","enableSavingPrevention","clearInterval","reload","dataCorruptionPreventer","dbRepo","start","tryGetCloudDB","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.1ce7b8b1.chunk.js","sourcesContent":["var map = {\n\t\"./ckb.js\": 25,\n\t\"./da.js\": 26,\n\t\"./de.js\": 27,\n\t\"./en.js\": 18,\n\t\"./es.js\": 28,\n\t\"./fr.js\": 29,\n\t\"./he.js\": 30,\n\t\"./index.js\": 74,\n\t\"./it.js\": 31,\n\t\"./ja.js\": 32,\n\t\"./ko.js\": 33,\n\t\"./lv.js\": 34,\n\t\"./nl.js\": 35,\n\t\"./pl.js\": 36,\n\t\"./pt_br.js\": 37,\n\t\"./ro.js\": 38,\n\t\"./ru.js\": 39,\n\t\"./se.js\": 40,\n\t\"./ua.js\": 41,\n\t\"./zh_cn.js\": 42\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 73;","export const EXTERNAL_TOOLS = [\n    {\n        name: '5e Tools',\n        url: 'https://5e.tools/'\n    },\n    {\n        name: 'Bestiario (5e Tools)',\n        url: 'https://5e.tools/bestiary.html'\n    },\n    {\n        name: 'Objetos mundanos y mágicos (5e Tools)',\n        url: 'https://5e.tools/items.html'\n    },\n    {\n        name: 'Calculadora de encuentros',\n        url: 'https://kastark.co.uk/rpgs/encounter-calculator-5th/'\n    },\n    {\n        name: 'Tabla de encuentros aleatorios (5e Tools)',\n        url: 'https://5e.tools/encountergen.html'\n    },\n    {\n        name: 'Generador de nombres',\n        url: 'https://www.fantasynamegen.com/'\n    },\n    {\n        name: 'Razas',\n        url: 'https://www.dndbeyond.com/races'\n    },\n    {\n        name: 'Clases',\n        url: 'https://www.dndbeyond.com/classes'\n    }\n];","import React from 'react';\nimport { faFolderPlus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function CreateNarrativeContextIcon() {\n    return <FontAwesomeIcon icon={faFolderPlus} color={'#fa9600'} />\n}","import '../styles/Home.css';\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { EXTERNAL_TOOLS } from '../data/external-tools';\nimport { CreateNarrativeContextIcon } from './icons/CreateNarrativeContextIcon';\n\nexport function Home({ appContext }) {\n    const navigate = useNavigate();\n\n    const [campaigns, setCampaigns] = useState([]);\n    const [worlds, setWorlds] = useState([]);\n\n    useEffect(() => {\n        appContext.setNarrativeContextById(null);\n        appContext.setBackButtonUrl(null);\n        appContext.setForwardButtonUrl(null);\n        const db = appContext.getDB();\n        setCampaigns(db.campaigns);\n        setWorlds(db.worlds);\n    }, [appContext]);\n\n    const createElementDB = () => {\n        navigate('/create-narrative-context');\n    }\n\n    return <div>\n        <div className='flex'>\n            <h1 className='flex1'>Narrative Tools</h1>\n            <div className='textRight homeTitleButtons'>\n                <button onClick={createElementDB}>\n                    <CreateNarrativeContextIcon /> Crear contexto narrativo\n                </button>\n            </div>\n        </div>\n\n\n        <h2><span role='img' aria-label='books'>📚</span> Campañas</h2>\n        <ul>\n            {campaigns.map(x => <li key={x.id}>\n                <Link to={`/narrative-context/${x.id}`}>{x.name}</Link>\n            </li>)}\n        </ul>\n        <h2><span role='img' aria-label='world'>🌎</span> Mundos</h2>\n        <ul>\n            {worlds.map(x => <li key={x.id}>\n                <Link to={`/narrative-context/${x.id}`}>{x.name}</Link>\n            </li>)}\n        </ul>\n        <h2><span role='img' aria-label='tools'>⚒️</span> Herramientas</h2>\n        <ul>\n            {EXTERNAL_TOOLS.map(x => <li key={x.name}>\n                <a href={x.url}>{x.name}</a>\n            </li>)}\n        </ul>\n    </div>;\n}","import { v4 as uuidv4 } from 'uuid';\n\nexport class IdGenerator {\n    static generateId() {\n        return uuidv4();\n    }\n}\n","export class ArrayUtils {\n    static moveElementInArray(arr, old_index, new_index) {\n        if (new_index >= arr.length) {\n            var k = new_index - arr.length + 1;\n            while (k--) {\n                arr.push(undefined);\n            }\n        }\n        arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n    };\n}","import { IdGenerator } from '../utils/id-generator';\n\nexport class BaseElement {\n\n    id = null;\n    name = null;\n    type = null;\n\n    static TYPES = {\n        PARAGRAPH: 'paragraph',\n        CONTAINER: 'container',\n        SHOP: 'shop'\n    };    \n\n    constructor(name, type) {\n        this.id = IdGenerator.generateId();\n        this.name = name;\n        this.type = type;\n    }\n\n    toJson() {\n        return {\n            id: this.id,\n            name: this.name,\n            type: this.type\n        }\n    }\n\n    static fromJson(data) {\n        throw Error('This method should not be used!');\n    }\n}","import { BaseElement } from './base-element';\n\nexport class ParagraphElement extends BaseElement {\n    body = null;\n\n    constructor(name, body = null) {\n        super(name, BaseElement.TYPES.PARAGRAPH);\n        this.body = body;\n    }\n\n    toJson() {\n        const json = super.toJson();\n        json['body'] = this.body;\n        return json;\n    }\n\n    static fromJson(data) {\n        const instance = new ParagraphElement(\n            data['name'],\n            data['body']\n        );\n        return instance;\n    }\n}","import { BaseElement } from './base-element';\nimport { ElementsFactory } from '../utils/elements-factory';\nimport { ArrayUtils } from '../utils/array-utils';\n\nexport class ContainerElement extends BaseElement {\n    elements = null;\n\n    constructor(name, elements = []) {\n        super(name, BaseElement.TYPES.CONTAINER);\n        this.elements = elements;\n    }\n\n    getElement(elementId) {\n        return this.elements.find(x => x.id === elementId);\n    }\n\n    addElement(element) {\n        this.elements.push(element);\n    }\n\n    removeElement(elementId) {\n        const element = this.getElement(elementId);\n        this.elements.splice(this.elements.indexOf(element), 1);\n    }\n\n    moveElementUp(elementId) {\n        const oldIndex = this.elements.indexOf(this.elements.find(x => x.id === elementId));\n        const newIndex = oldIndex - 1;\n        if (oldIndex === 0) return;\n        ArrayUtils.moveElementInArray(this.elements, oldIndex, newIndex);\n    }\n\n    moveElementDown(elementId) {\n        const oldIndex = this.elements.indexOf(this.elements.find(x => x.id === elementId));\n        const newIndex = oldIndex + 1;\n        if (newIndex === this.elements.length) return;\n        ArrayUtils.moveElementInArray(this.elements, oldIndex, newIndex);\n    }\n\n    findInChild(elementId) {\n        for (const element of this.elements) {\n            if (element.id === elementId) return element;\n            if (element.findInChild) {\n                const found = element.findInChild(elementId);\n                if (found) return found;\n            }\n        }\n        return null;\n    }\n\n    // Returns a plain list of viewable elements obtained through iteraring al childs\n    getPlainViewableElements() {\n        let plainElements = [];\n        for (const element of this.elements) {\n            if (element.type === BaseElement.TYPES.CONTAINER) {\n                plainElements = plainElements.concat(element.getPlainViewableElements());\n            } else {\n                plainElements.push(element);\n            }\n        }\n        return plainElements;\n    }\n\n    toJson() {\n        const json = super.toJson();\n        json['elements'] = this.elements.map(x => x.toJson());\n        return json;\n    }\n\n    static fromJson(data) {\n        const instance = new ContainerElement(\n            data['name'],\n            (data['elements'] || []).map(x => ElementsFactory.mapElementFromJson(x))\n        );\n        return instance;\n    }\n}","import { IdGenerator } from '../utils/id-generator';\n\nexport class ShopItem {\n\n    id = null;\n    title = null;\n    price = null;\n    link = null;\n    amount = 0;\n\n    constructor(title, price, link, amount = 0) {\n        this.id = IdGenerator.generateId();\n        this.title = title;\n        this.price = price;\n        this.link = link;\n        this.amount = amount;\n    }\n\n    clone() {\n        return ShopItem.fromJson(this.toJson());\n    }\n\n    toJson() {\n        return {\n            id: this.id,\n            title: this.title,\n            price: this.price,\n            link: this.link,\n            amount: this.amount\n        }\n    }\n\n    static fromJson(data) {\n        const instance = new ShopItem(\n            data['title'],\n            data['price'],\n            data['link'],\n            data['amount']\n        );\n        instance.id = data['id'];\n        return instance;\n    }\n}","import { BaseElement } from './base-element';\nimport { ShopItem } from './shop-item';\n\nexport class ShopElement extends BaseElement {\n    items = null;\n\n    constructor(name, items = []) {\n        super(name, BaseElement.TYPES.SHOP);\n        this.items = items;\n    }\n\n    toJson() {\n        const json = super.toJson();\n        json['items'] = this.items.map(x => x.toJson());\n        return json;\n    }\n\n    static fromJson(data) {\n        const instance = new ShopElement(\n            data['name'],\n            data['items'].map(x => ShopItem.fromJson(x))\n        );\n        return instance;\n    }\n}","import { ParagraphElement } from '../models/paragraph-element';\nimport { ContainerElement } from '../models/container-element';\nimport { ShopElement } from '../models/shop-element';\n\nexport class ElementsFactory {\n    static _ELEMENT_TYPES_MAPPING = {\n        'paragraph': ParagraphElement,\n        'container': ContainerElement,\n        'shop': ShopElement\n    };\n\n    static mapElementFromJson(data) {\n        const instance = this._ELEMENT_TYPES_MAPPING[data['type']].fromJson(data);\n        instance.id = data['id'];\n        return instance;\n    }\n\n    static createElement(name, type) {\n        return new this._ELEMENT_TYPES_MAPPING[type](name);\n    }\n}","import { IdGenerator } from '../utils/id-generator';\nimport { ArrayUtils } from '../utils/array-utils';\nimport { ElementsFactory } from '../utils/elements-factory';\nimport { BaseElement } from './base-element';\n\nexport class NarrativeCategory {\n    id = null;\n    type = null;\n    elements = null;\n\n    constructor(name) {\n        this.id = IdGenerator.generateId();\n        this.name = name;\n        this.elements = [];\n    }\n\n    getElement(elementId) {\n        return this.elements.find(x => x.id === elementId);\n    }\n\n    findElementAnywhere(elementId) {\n        for (const element of this.elements) {\n            if (element.id === elementId) return element;\n            if (element.findInChild) {\n                const found = element.findInChild(elementId);\n                if (found) return found;\n            }\n        }\n        return null;\n    }\n\n    addElement(element) {\n        this.elements.push(element);\n    }\n\n    removeElement(elementId) {\n        const element = this.getElement(elementId);\n        this.elements.splice(this.elements.indexOf(element), 1);\n    }\n\n    moveElementUp(elementId) {\n        const oldIndex = this.elements.indexOf(this.elements.find(x => x.id === elementId));\n        const newIndex = oldIndex - 1;\n        if (oldIndex === 0) return;\n        ArrayUtils.moveElementInArray(this.elements, oldIndex, newIndex);\n    }\n\n    moveElementDown(elementId) {\n        const oldIndex = this.elements.indexOf(this.elements.find(x => x.id === elementId));\n        const newIndex = oldIndex + 1;\n        if (newIndex === this.elements.length) return;\n        ArrayUtils.moveElementInArray(this.elements, oldIndex, newIndex);\n    }   \n    \n    // Returns a plain list of viewable elements obtained through iteraring al childs\n    _getPlainViewableElements() {\n        let plainElements = [];\n        for (const element of this.elements) {\n            if (element.type === BaseElement.TYPES.CONTAINER) {\n                plainElements = plainElements.concat(element.getPlainViewableElements());\n            } else {\n                plainElements.push(element);\n            }\n        }\n        return plainElements;\n    }\n\n    getPrevElement(elementId) {\n        const viewableElements = this._getPlainViewableElements();\n        const index = viewableElements.indexOf(viewableElements.find(x => x.id === elementId));\n        if (index === 0) return null;\n        return viewableElements[index - 1];\n    }\n\n    getNextElement(elementId) {\n        const viewableElements = this._getPlainViewableElements();\n        const index = viewableElements.indexOf(viewableElements.find(x => x.id === elementId));\n        if (index === (viewableElements.length - 1)) return null;\n        return viewableElements[index + 1];\n    }\n\n    toJson() {\n        return {\n            id: this.id,\n            name: this.name,\n            elements: this.elements.map(element => element.toJson())\n        }\n    }\n\n    static fromJson(data) {\n        const instance = new NarrativeCategory(\n            data['name']\n        );\n        instance.id = data['id'];\n        instance.elements = data['elements'].map(x => ElementsFactory.mapElementFromJson(x));\n        return instance;\n    }\n}","import { IdGenerator } from '../utils/id-generator';\nimport { NarrativeCategory } from './narrative-category';\nimport { ArrayUtils } from '../utils/array-utils';\n\nexport class NarrativeContext {\n\n    static TYPES = [\n        {type: 'world', name: 'Mundo'},\n        {type: 'campaign', name: 'Campaña'}\n    ];\n\n    id = null;\n    type = null;\n    name = null;\n    categories = null;\n\n    constructor(type, name) {\n        if (!NarrativeContext.TYPES.find(x => x.type === type)) throw Error('Invalid type');\n        this.id = IdGenerator.generateId();\n        this.type = type;\n        this.name = name;\n        this.categories = [];\n    }\n\n    getNarrativeCategory(categoryId) {\n        return this.categories.find(x => x.id === categoryId);\n    }\n\n    addNarrativeCategory(category) {\n        this.categories.push(category);\n    }\n\n    removeNarrativeCategory(categoryId) {\n        const category = this.getNarrativeCategory(categoryId);\n        this.categories.splice(this.categories.indexOf(category), 1);\n    }\n\n    moveNarrativeCategoryUp(categoryId) {\n        const oldIndex = this.categories.indexOf(this.categories.find(x => x.id === categoryId));\n        const newIndex = oldIndex - 1;\n        if (oldIndex === 0) return;\n        ArrayUtils.moveElementInArray(this.categories, oldIndex, newIndex);\n    }\n\n    moveNarrativeCategoryDown(categoryId) {\n        const oldIndex = this.categories.indexOf(this.categories.find(x => x.id === categoryId));\n        const newIndex = oldIndex + 1;\n        if (newIndex === this.categories.length) return;\n        ArrayUtils.moveElementInArray(this.categories, oldIndex, newIndex);\n    }\n\n    toJson() {\n        return {\n            id: this.id,\n            type: this.type,\n            name: this.name,\n            categories: this.categories.map(x => x.toJson())\n        }\n    }\n\n    static fromJson(data) {\n        const instance = new NarrativeContext(\n            data['type'],\n            data['name']\n        );\n        instance.id = data['id'];\n        instance.categories = data['categories'].map(x => NarrativeCategory.fromJson(x));\n        return instance;\n    }\n\n}","import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { NarrativeContext } from '../models/narrative-context';\n\nexport function CreateNarrativeContext({ appContext }) {\n    const navigate = useNavigate();\n\n    const [name, setName] = useState();\n    const [type, setType] = useState(NarrativeContext.TYPES[0].type);\n\n    useEffect(() => {\n        appContext.setNarrativeContextById(null);\n    }, [appContext])\n\n\n    const create = () => {\n        const narrativeContext = new NarrativeContext(type, name);\n        appContext.getDB().addNarrativeContext(narrativeContext);\n        appContext.saveDB();\n        navigate('/');\n    }\n\n    return <div>\n        <h1>Crear contexto narrativo</h1>\n        <input type='text' placeholder='Nombre' onChange={(event) => setName(event.target.value)} />\n        <select onChange={(event) => setType(event.target.value)}>\n            {NarrativeContext.TYPES.map(x => <option key={x.type} value={x.type}>{x.name}</option>)}\n        </select>\n        <button onClick={create}>\n            Crear\n        </button>\n    </div>;\n}","import React from 'react';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function CreateIcon() {\n    return <FontAwesomeIcon icon={faPlus} color={'#2b3340'} />\n}","import React from 'react';\nimport { faScroll } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function ScrollIcon() {\n    return <FontAwesomeIcon icon={faScroll} color={'#baa28f'} />\n}","import React from 'react';\nimport { faFolderOpen } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function FolderIcon() {\n    return <FontAwesomeIcon icon={faFolderOpen} color={'#FACC30'} />\n}","import React from 'react';\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function ShopIcon() {\n    return <FontAwesomeIcon icon={faShoppingCart} color={'#609fbf'} />\n}","import '../styles/CreateElementButton.css';\nimport React, { useRef } from 'react';\nimport { BaseElement } from '../models/base-element';\nimport { CreateIcon } from './icons/CreateIcon';\nimport { ScrollIcon } from './icons/ScrollIcon';\nimport { FolderIcon } from './icons/FolderIcon';\nimport { ShopIcon } from './icons/ShopIcon';\n\nexport function CreateElementButton({ onClick = (type) => { } }) {\n\n    const dropdownBody = useRef();\n\n\n    const showDropdown = () => {\n        dropdownBody.current.classList.toggle('showDropdownBody');\n    }\n\n    const onDropdownElementClick = (type) => {\n        dropdownBody.current.classList.toggle('showDropdownBody');\n        onClick(type);\n    }\n\n    return <div className=\"CreateElementButton\">\n        <button onClick={showDropdown}>\n            <CreateIcon />\n            <span className='tooltip'>Crear elemento</span>\n        </button>\n        <div ref={dropdownBody} className='dropdownBody'>\n            <button onClick={() => onDropdownElementClick(BaseElement.TYPES.PARAGRAPH)}>\n                <ScrollIcon /> Texto\n            </button>\n            <button onClick={() => onDropdownElementClick(BaseElement.TYPES.CONTAINER)}>\n                <FolderIcon /> Contenedor\n            </button>\n            <button onClick={() => onDropdownElementClick(BaseElement.TYPES.SHOP)}>\n                <ShopIcon /> Tienda\n            </button>\n        </div>\n    </div>;\n}","import React from 'react';\nimport { faTag } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function RenameIcon() {\n    return <FontAwesomeIcon icon={faTag} color={'#fcba03'} />\n}","import React from 'react';\nimport { faLevelUpAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function MoveUpIcon() {\n    return <FontAwesomeIcon icon={faLevelUpAlt} color={'#012452'} />\n}","import React from 'react';\nimport { faLevelDownAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function MoveDownIcon() {\n    return <FontAwesomeIcon icon={faLevelDownAlt} color={'#012452'} />\n}","import React from 'react';\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function DeleteIcon() {\n    return <FontAwesomeIcon icon={faTrashAlt} color={'#98a3b3'} />\n}","import '../styles/ElementListItem.css';\nimport React, { useRef, useState } from 'react';\nimport { BaseElement } from '../models/base-element';\nimport { Link } from 'react-router-dom';\nimport { ElementsFactory } from '../utils/elements-factory';\nimport { CreateElementButton } from './CreateElementButton';\nimport { RenameIcon } from './icons/RenameIcon';\nimport { MoveUpIcon } from './icons/MoveUpIcon';\nimport { MoveDownIcon } from './icons/MoveDownIcon';\nimport { DeleteIcon } from './icons/DeleteIcon';\nimport { ScrollIcon } from './icons/ScrollIcon';\nimport { FolderIcon } from './icons/FolderIcon';\nimport { ShopIcon } from './icons/ShopIcon';\n\nexport function ElementListItem({ appContext, narrativeContextId, narrativeCategoryId, element,\n    onMoveElementUp = (element) => { }, onMoveElementDown = (element) => { },\n    onDeleteElement = (element) => { }, onRenameElement = (element) => { },\n    onChildUpdate = () => { } }) {\n\n    const isContainer = () => {\n        return element.type === BaseElement.TYPES.CONTAINER;\n    }\n\n    const shouldDisplayLink = () => {\n        return !isContainer();\n    }\n\n    const getIcon = () => {\n        const icons = {};\n        icons[BaseElement.TYPES.PARAGRAPH] = <ScrollIcon />;\n        icons[BaseElement.TYPES.CONTAINER] = <FolderIcon />;\n        icons[BaseElement.TYPES.SHOP] = <ShopIcon />;\n        return icons[element.type];\n    }\n\n    const createChildElement = (type) => {\n        const name = window.prompt('Ingresa el nombre del nuevo elemento');\n        if (!name) return;\n        const newElement = ElementsFactory.createElement(name, type);\n        element.addElement(newElement);\n        appContext.saveDB();\n        onChildUpdate();\n    }\n\n    const deleteChildElement = (childElement) => {\n        const shouldDelete = window.confirm(`Estas seguro de eliminar el elemento ${childElement.name}`);\n        if (!shouldDelete) return;\n        element.removeElement(childElement.id);\n        appContext.saveDB();\n        onChildUpdate();\n    }\n\n    const moveChildElementUp = (childElement) => {\n        element.moveElementUp(childElement.id);\n        appContext.saveDB();\n        onChildUpdate();\n    }\n\n    const moveChildElementDown = (childElement) => {\n        element.moveElementDown(childElement.id);\n        appContext.saveDB();\n        onChildUpdate();\n    }\n\n    const renameChildElement = (element) => {\n        const name = window.prompt('Ingresa el nuevo nombre del elemento', element.name);\n        if (!name) return;\n        element.name = name;\n        appContext.saveDB();\n        onChildUpdate();\n    }\n\n\n    return <div className=\"ElementListItem\">\n        <div className='flex'>\n            <div className='flex2'><span role='img' aria-label='icon'>{getIcon()} </span>\n                {\n                    shouldDisplayLink() ?\n                        <Link to={`/narrative-context/${narrativeContextId}/${narrativeCategoryId}/${element.id}`}>\n                            {element.name}\n                        </Link> :\n                        <span>\n                            {element.name}\n                        </span>\n                }\n            </div>\n\n            <div className='textRight'>\n                {\n                    isContainer() ?\n                        <CreateElementButton onClick={createChildElement} /> : <></>\n                }\n                <button onClick={() => onRenameElement(element)}>\n                    <RenameIcon />\n                    <span className='tooltip'>Renombrar</span>\n                </button>\n                <button onClick={() => onMoveElementUp(element)}>\n                    <MoveUpIcon />\n                    <span className='tooltip'>Subir</span>\n                </button>\n                <button onClick={() => onMoveElementDown(element)}>\n                    <MoveDownIcon />\n                    <span className='tooltip'>Bajar</span>\n                </button>\n                <button onClick={() => onDeleteElement(element)}>\n                    <DeleteIcon />\n                    <span className='tooltip'>Eliminar</span>\n                </button>\n            </div>\n        </div>\n        {\n            isContainer() ?\n                <div>{\n                    element.elements.map(chileElement =>\n                        <ElementListItem key={chileElement.id} appContext={appContext}\n                            narrativeContextId={narrativeContextId}\n                            narrativeCategoryId={narrativeCategoryId} element={chileElement}\n                            onMoveElementUp={moveChildElementUp} onMoveElementDown={moveChildElementDown}\n                            onDeleteElement={deleteChildElement} onRenameElement={renameChildElement}\n                            onChildUpdate={onChildUpdate} />\n                    )\n                }\n                </div> : <></>\n        }\n    </div>;\n}","import '../styles/NarrativeCategoryComponent.css';\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { BaseElement } from '../models/base-element';\nimport { CreateElementButton } from './CreateElementButton';\nimport { ElementsFactory } from '../utils/elements-factory';\nimport { ElementListItem } from './ElementListItem';\nimport { RenameIcon } from './icons/RenameIcon';\nimport { MoveUpIcon } from './icons/MoveUpIcon';\nimport { MoveDownIcon } from './icons/MoveDownIcon';\nimport { DeleteIcon } from './icons/DeleteIcon';\n\nexport function NarrativeCategoryComponent({ appContext, narrativeContext, narrativeCategory, onCategoryChange, moveCategoryUp, moveCategoryDown }) {\n\n    const [elementsState, setElementsState] = useState(narrativeCategory.elements);\n\n    const rerender = () => {\n        setElementsState([...narrativeCategory.elements]);\n        setTimeout(() => setElementsState(narrativeCategory.elements), 0);\n    }\n\n    const onCreateElement = (type) => {\n        const name = window.prompt('Ingresa el nombre del nuevo elemento');\n        if (!name) return;\n        const newElement = ElementsFactory.createElement(name, type);\n        narrativeCategory.addElement(newElement);\n        appContext.saveDB();\n        rerender();\n    }\n\n    const deleteElement = (element) => {\n        const shouldDelete = window.confirm(`Estas seguro de eliminar el elemento ${element.name}`);\n        if (!shouldDelete) return;\n        narrativeCategory.removeElement(element.id);\n        appContext.saveDB();\n        rerender();\n    }\n\n    const moveElementUp = (element) => {\n        narrativeCategory.moveElementUp(element.id);\n        appContext.saveDB();\n        rerender();\n    }\n\n    const moveElementDown = (element) => {\n        narrativeCategory.moveElementDown(element.id);\n        appContext.saveDB();\n        rerender();\n    }\n\n    const renameElement = (element) => {\n        const name = window.prompt('Ingresa el nuevo nombre del elemento', element.name);\n        if (!name) return;\n        element.name = name;\n        appContext.saveDB();\n        onCategoryChange();\n    }\n\n    const deleteCategory = () => {\n        const shouldDelete = window.confirm(`Estas seguro de eliminar la categoría ${narrativeCategory.name}`);\n        if (!shouldDelete) return;\n        narrativeContext.removeNarrativeCategory(narrativeCategory.id);\n        appContext.saveDB();\n        onCategoryChange();\n    }\n\n    const renameCategory = () => {\n        const name = window.prompt('Ingresa el nuevo nombre de la categoría', narrativeCategory.name);\n        if (!name) return;\n        narrativeCategory.name = name;\n        appContext.saveDB();\n        onCategoryChange();\n    }\n\n    return <div className=\"NarrativeCategory\">\n        <div className='flex'>\n            <h3 className='flex2'>{narrativeCategory.name}</h3>\n            <div className='textRight narrativeCategoryTitleButtons'>\n                <CreateElementButton onClick={onCreateElement} />\n                <button onClick={renameCategory}>\n                    <RenameIcon />\n                    <span className='tooltip'>Renombrar</span>\n                </button>\n                <button onClick={() => moveCategoryUp(narrativeCategory)}>\n                    <MoveUpIcon />\n                    <span className='tooltip'>Subir</span>\n                </button>\n                <button onClick={() => moveCategoryDown(narrativeCategory)}>\n                    <MoveDownIcon />\n                    <span className='tooltip'>Bajar</span>\n                </button>\n                <button onClick={deleteCategory}>\n                    <DeleteIcon />\n                    <span className='tooltip'>Eliminar categoría</span>\n                </button>\n            </div>\n        </div>\n        <div className=\"narrativeCategoryElements\">\n            {\n                elementsState.map(element =>\n                    <ElementListItem key={element.id} appContext={appContext}\n                        narrativeContextId={narrativeContext.id}\n                        narrativeCategoryId={narrativeCategory.id} element={element}\n                        onMoveElementUp={moveElementUp} onMoveElementDown={moveElementDown}\n                        onDeleteElement={deleteElement} onRenameElement={renameElement}\n                        onChildUpdate={rerender} />\n                )\n            }\n        </div>\n    </div>;\n}","import '../styles/ViewNarrativeContext.css';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { NarrativeCategory } from '../models/narrative-category';\nimport { NarrativeCategoryComponent } from './NarrativeCategoryComponent';\nimport { CreateIcon } from './icons/CreateIcon';\nimport { RenameIcon } from './icons/RenameIcon';\nimport { DeleteIcon } from './icons/DeleteIcon';\n\nexport function ViewNarrativeContext({ appContext }) {\n    const navigate = useNavigate();\n    const { narrativeContextId } = useParams();\n    const [narrativeContext, setNarrativeContext] = useState(null);\n    const [narrativeContextCategories, setNarrativeContextCategories] = useState([]);\n\n    useEffect(() => {\n        appContext.setNarrativeContextById(narrativeContextId);\n        const obtainedNarrativeContext = appContext.getDB().getNarrativeContext(narrativeContextId);\n        setNarrativeContext(obtainedNarrativeContext);\n        setNarrativeContextCategories(obtainedNarrativeContext.categories);\n        appContext.setBackButtonUrl('/');\n        appContext.setForwardButtonUrl(null);\n    }, [appContext, narrativeContextId]);\n\n    const addNarrativeCategory = () => {\n        const categoryName = window.prompt('Ingresa nombre de la categoría');\n        if (categoryName) {\n            const category = new NarrativeCategory(categoryName);\n            const narrativeContext = appContext.getDB().getNarrativeContext(narrativeContextId);\n            narrativeContext.addNarrativeCategory(category);\n            appContext.saveDB();\n            setNarrativeContextCategories([...narrativeContext.categories]);\n        }\n    }\n\n    const deleteNarrativeContext = () => {\n        const shouldDelete = window.confirm(`Estas seguro que deseas eliminar ${narrativeContext.type === 'world' ? 'el mundo' : 'la campaña'\n            } ${narrativeContext.name}`);\n        if (!shouldDelete) return;\n        appContext.getDB().removeNarrativeContext(narrativeContextId);\n        appContext.saveDB();\n        navigate('/');\n    }\n\n    const renameMarrativeContext = () => {\n        const name = window.prompt(`Ingresa el nuevo nombre de ${narrativeContext.type === 'world' ? 'el mundo' : 'la campaña'}`, narrativeContext.name);\n        if (!name) return;\n        narrativeContext.name = name;\n        appContext.saveDB();\n        setNarrativeContext({ ...narrativeContext });\n        setTimeout(() => setNarrativeContext(narrativeContext), 0);\n    }\n\n    const onCategoryChange = () => {\n        setNarrativeContextCategories([...narrativeContext.categories]);\n    }\n\n    const moveCategoryUp = (category) => {\n        narrativeContext.moveNarrativeCategoryUp(category.id);\n        appContext.saveDB();\n        setNarrativeContextCategories([...narrativeContext.categories]);\n    }\n\n    const moveCategoryDown = (category) => {\n        narrativeContext.moveNarrativeCategoryDown(category.id);\n        appContext.saveDB();\n        setNarrativeContextCategories([...narrativeContext.categories]);\n    }\n\n    return <div className=\"ViewNarrativeContext\">\n        <div className='flex narrativeContextTitleBar'>\n            <h1 className='flex2'>{\n                narrativeContext?.type === 'world' ?\n                    <span role='img' aria-label='world'>🌎</span> :\n                    <span role='img' aria-label='books'>📚</span>\n            } {narrativeContext?.name}</h1>\n            <div className='textRight narrativeContextTitleButtons'>\n                <button onClick={addNarrativeCategory}>\n                    <CreateIcon />\n                    <span className='tooltip'>Crear categoría</span>\n                </button>\n                <button onClick={renameMarrativeContext}>\n                    <RenameIcon />\n                    <span className='tooltip'>Renombrar</span>\n                </button>\n                <button onClick={deleteNarrativeContext}>\n                    <DeleteIcon />\n                    <span className='tooltip'>Eliminar</span>\n                </button>\n            </div>\n        </div>\n        {\n            narrativeContextCategories.map(category =>\n                <NarrativeCategoryComponent key={category.id} appContext={appContext}\n                    narrativeCategory={category} narrativeContext={narrativeContext}\n                    onCategoryChange={onCategoryChange} moveCategoryUp={moveCategoryUp}\n                    moveCategoryDown={moveCategoryDown} />)\n        }\n    </div>;\n}","import { NarrativeContext } from './narrative-context';\n\nexport class Database {\n\n    campaigns = null; // Array of NarrativeContext\n    worlds = null; // Array of NarrativeContext\n\n    constructor() {\n        this.campaigns = [];\n        this.worlds = []; \n    }\n\n    getNarrativeContext(narrativeContextId) {\n        return this.campaigns.concat(this.worlds).find(x => x.id === narrativeContextId);\n    }\n\n    addNarrativeContext(narrativeContext) {\n        if (narrativeContext.type === 'world') {\n            this.addWorld(narrativeContext);\n        } else {\n            this.addCampaign(narrativeContext);\n        }\n    }\n\n    removeNarrativeContext(narrativeContextId) {\n        const narrativeContext = this.getNarrativeContext(narrativeContextId);\n        let narrativeContextsList = null;\n        if (narrativeContext.type === 'world') {\n            narrativeContextsList = this.worlds;\n        } else {\n            narrativeContextsList = this.campaigns;\n        }\n        narrativeContextsList.splice(narrativeContextsList.indexOf(narrativeContext), 1);\n    }\n\n    addWorld(world) {\n        this.worlds.push(world);\n    }\n\n    addCampaign(campaign) {\n        this.campaigns.push(campaign);\n    }\n\n    toJson() {\n        return {\n            campaigns: this.campaigns.map(x => x.toJson()),\n            worlds: this.worlds.map(x => x.toJson())\n        }\n    }\n\n    static fromJson(data) {\n        const instance = new Database();\n        instance.campaigns = data['campaigns'].map(x => NarrativeContext.fromJson(x));\n        instance.worlds = data['worlds'].map(x => NarrativeContext.fromJson(x));\n        return instance;\n    }\n\n}","export const WEB_API_URL = window.location.origin.indexOf('localhost') !== -1 ? 'http://localhost:5000/api': 'https://narrativetools.herokuapp.com/api';","import { WEB_API_URL } from '../config.js';\n\nexport class WebApiRepository {\n\n    _get_token() {\n        return localStorage.getItem('token');\n    }\n\n    async _get(endpoint) {\n        const headers = { 'Content-Type': 'application/json' };\n        const authToken = this._get_token();\n        if (authToken) {\n            headers['Authorization'] = authToken;\n        }\n        const response = await fetch(`${WEB_API_URL}${endpoint}`, {\n            method: 'GET',\n            headers: headers\n        });\n        if (response.ok) return await response.json();\n        throw await response.json();\n    }\n\n    async _post(endpoint, body) {\n        const headers = { 'Content-Type': 'application/json' };\n        const authToken = this._get_token();\n        if (authToken) {\n            headers['Authorization'] = authToken;\n        }\n        const response = await fetch(`${WEB_API_URL}${endpoint}`, {\n            method: 'POST',\n            body: JSON.stringify(body),\n            headers: headers\n        });\n        if (response.ok) return await response.json();\n        throw await response.json();\n    }\n\n    async _put(endpoint, body) {\n        const headers = { 'Content-Type': 'application/json' };\n        const authToken = this._get_token();\n        if (authToken) {\n            headers['Authorization'] = authToken;\n        }\n        const response = await fetch(`${WEB_API_URL}${endpoint}`, {\n            method: 'PUT',\n            body: JSON.stringify(body),\n            headers: headers\n        });\n        if (response.ok) return await response.json();\n        throw await response.json();\n    }\n\n    async _delete(endpoint, body) {\n        const headers = { 'Content-Type': 'application/json' };\n        const authToken = this._get_token();\n        if (authToken) {\n            headers['Authorization'] = authToken;\n        }\n        const response = await fetch(`${WEB_API_URL}${endpoint}`, {\n            method: 'DELETE',\n            body: JSON.stringify(body),\n            headers: headers\n        });\n        if (response.ok) return await response.json();\n        throw await response.json();\n    }\n\n}","import { WebApiRepository } from './web-api-repository';\nimport { DBRepository } from './db-repository';\nimport { Database } from '../models/database';\n\nexport class DBSyncRepository extends WebApiRepository {\n\n    async pullDB() {\n        const db = await this._get('/database');\n        if (Object.keys(db).length === 0) return null;\n        return Database.fromJson(db);\n    }\n\n    async pushDB(dbJson) {\n        await this._post('/database', dbJson);\n    }\n}","import { Database } from \"../models/database\";\nimport { DBSyncRepository } from './db-sync-repository';\n\nexport class DBRepository {\n\n    static _DB_KEY = 'db'\n    static _db = null;\n    static _afterSaveHooks = [];\n    static _preventSave = false;\n    static _onDirtyDBCallback = () => { };\n    static _dbSyncRepository = new DBSyncRepository();\n    static _onCloudDBDownloadedHooks = [];\n\n    constructor() {\n        DBRepository._loadOrCreateLocalDB();\n    }\n\n    async tryGetCloudDB() {\n        await DBRepository._tryDownloadCloudDB();\n    }\n\n    static _loadOrCreateLocalDB() {\n        if (DBRepository._db) return;\n        const loadedDB = localStorage.getItem(DBRepository._DB_KEY);\n        if (!loadedDB) {\n            DBRepository._db = new Database();\n            DBRepository._save(false);\n        } else {\n            DBRepository._db = Database.fromJson(JSON.parse(loadedDB));\n        }\n    }\n\n    static async _tryDownloadCloudDB() {\n        console.log('Downloading remote DB');\n        const downloadedDB = await DBRepository._dbSyncRepository.pullDB();\n        if (downloadedDB) {\n            DBRepository._db = downloadedDB;\n            DBRepository._save(false);\n            for (const hook of DBRepository._onCloudDBDownloadedHooks) {\n                hook();\n            }\n        }\n    }\n\n    registerOnCloudDBDownloadedHook(hook) {\n        DBRepository._onCloudDBDownloadedHooks.push(hook);\n    }\n\n    static _save(saveInCloud = true) {\n        if (DBRepository._preventSave) {\n            DBRepository._onDirtyDBCallback();\n            return;\n        }\n\n        localStorage.setItem(DBRepository._DB_KEY, JSON.stringify(DBRepository._db.toJson()));\n        if (saveInCloud) {\n            DBRepository._callAfterSaveHooks();\n            DBRepository._dbSyncRepository.pushDB(DBRepository._db.toJson());\n        }\n    }\n\n    registerAfterSaveHook(hook) {\n        DBRepository._afterSaveHooks.push(hook);\n    }\n\n    static _callAfterSaveHooks() {\n        for (const hook of DBRepository._afterSaveHooks) {\n            hook();\n        }\n    }\n\n    registerOnDirtyDBCallback(callback) {\n        DBRepository._onDirtyDBCallback = callback;\n    }\n\n    enableSavingPrevention() {\n        DBRepository._preventSave = true;\n    }\n\n    save() {\n        DBRepository._save();\n    }\n\n}","import React, { useRef } from 'react';\nimport SunEditor from 'suneditor-react';\nimport '../styles/RichTextEditor.css';\n\nexport function RichTextEditor({ onChange, initialValue }) {\n\n    const editorOptions = {\n        buttonList: [\n            ['formatBlock', 'bold', 'underline', 'italic', 'strike'],\n            ['fontColor', 'hiliteColor'],\n            ['removeFormat'],\n            ['align', 'horizontalRule', 'list'],\n            ['table', 'link', 'image', 'video', 'audio'],\n            ['fullScreen', 'codeView'],\n        ],\n        formats: [\n            {\n                tag:'p',\n                name: 'Párrafo'\n            },\n            {\n                tag:'h1',\n                name: 'Título'\n            },\n            {\n                tag:'h2',\n                name: 'Subtítulo'\n            },\n            {\n                tag:'h3',\n                name: 'Sección'\n            },\n            {\n                tag:'blockquote',\n                name: 'Bloque de descripción'\n            },\n            {\n                tag:'pre',\n                name: 'Notas de DM'\n            },\n            //'p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'\n        ]\n    };\n\n    const editor = useRef();\n\n    const getSunEditorInstance = (sunEditor) => {\n        editor.current = sunEditor;\n    };\n\n    const onEditorChange = (state) => {\n        onChange(editor.current.getContents());\n    }\n\n    const handleInput = (event) => {\n        onChange(editor.current.getContents());\n    }\n\n    return <div className=\"EditorContainer\">\n        <SunEditor lang='es' defaultValue={initialValue} height='40vh'\n            onChange={onEditorChange} onInput={handleInput} \n            getSunEditorInstance={getSunEditorInstance} setOptions={editorOptions} />\n    </div >;\n}","import React, { useState } from 'react';\nimport { DBRepository } from '../repositories/db-repository';\nimport { RichTextEditor } from './RichTextEditor';\nimport '../styles/ParagraphElementComponent.css';\n\nexport function ParagraphElementComponent({ appContext, element, parentExposedFuntions }) {\n\n    const [editMode, setEditMode] = useState(false);\n    let currentEditorValue = null;\n    let hasChangedAtLeastOneTime = false;\n\n    const edit = () => {\n        setEditMode(true);\n    }\n\n    const save = () => {\n        if (!hasChangedAtLeastOneTime) {\n            discardChanges();\n            return;\n        }\n        element.body = currentEditorValue;\n        const repo = appContext.getRepository(DBRepository);\n        repo.save();\n        setEditMode(false);\n    }\n\n    const discardChanges = () => {\n        currentEditorValue = null;\n        setEditMode(false);\n    }\n\n    const onBodyChange = (value) => {\n        hasChangedAtLeastOneTime = true;\n        currentEditorValue = value;\n    }\n\n    parentExposedFuntions.edit = edit;\n\n    return <div className=\"ParagraphElement\">\n        {\n            editMode ? <>\n                <button onClick={save}>\n                    <span role='img' aria-label='save'>💾</span> Guardar cambios\n                </button>\n                <button onClick={discardChanges}>\n                    <span role='img' aria-label='cancel'>❌</span> Descartar cambios\n                </button>\n            </> : <></>\n        }\n        <br></br>\n        {\n            editMode ?\n                <>\n                    <RichTextEditor onChange={onBodyChange} initialValue={element.body} />\n                </> :\n                <div dangerouslySetInnerHTML={{ __html: element.body }} />\n\n        }\n    </div>;\n}","import React, { useState } from 'react';\nimport { DBRepository } from '../repositories/db-repository';\nimport { RichTextEditor } from './RichTextEditor';\nimport '../styles/ParagraphElementComponent.css';\nimport { ShopItem } from '../models/shop-item';\n\nexport function ShopTableEditor({ appContext, items, onItemsChange = (items) => { }, parentExposedFuntions }) {\n\n    const [itemsList, setItemsList] = useState(items?.map(x => x.clone()) || []);\n\n\n    const addItem = () => {\n        itemsList.push(new ShopItem());\n        onItemsChange([...itemsList]);\n        setItemsList([...itemsList]);\n    }\n\n    const removeItem = (item) => {\n        itemsList.splice(itemsList.indexOf(item), 1);\n        onItemsChange([...itemsList]);\n        setItemsList([...itemsList]);\n    }\n\n    const updateItemProp = (item, prop, value) => {\n        item[prop] = value;\n        onItemsChange([...itemsList]);\n        setItemsList([...itemsList]);\n    }\n\n    parentExposedFuntions.addItem = addItem;\n\n\n    return <div className=\"ShopTableEditor\">\n        <table className=\"shopTable\">\n            <thead>\n                <tr>\n                    <th>Objeto</th>\n                    <th>Enlace</th>\n                    <th>Precio</th>\n                    <th>Cantidad disponible</th>\n                    <th></th>\n                </tr>\n            </thead>\n            <tbody>\n                {\n                    itemsList?.map(x => <tr key={x.id} className={\n                        itemsList.indexOf(x) % 2 ?\n                            'oddRow' : 'evenRow'\n                    }>\n                        <td>\n                            <input key={`${x.id}-titleInput`} onChange={(event) => updateItemProp(x, 'title', event.target.value)}\n                                value={x.title || ''} />\n                        </td>\n                        <td>\n                            <input key={`${x.id}-linkInput`} onChange={(event) => updateItemProp(x, 'link', event.target.value)}\n                                value={x.link || ''} />\n                        </td>\n                        <td>\n                            <input key={`${x.id}-priceInput`} onChange={(event) => updateItemProp(x, 'price', event.target.value)}\n                                value={x.price || ''} />\n                        </td>\n                        <td>\n                            <input type='number' key={`${x.id}-amountInput`} onChange={(event) => updateItemProp(x, 'amount', parseInt(event.target.value))}\n                                value={x.amount || 0} />\n                        </td>\n                        <td>\n                            <button onClick={() => removeItem(x)}>\n                                <span role='img' aria-label='delete'>🗑️</span>\n                            </button>\n                        </td>\n                    </tr>)\n                }\n            </tbody>\n        </table>\n    </div>;\n}","import '../styles/ShopElementComponent.css';\nimport React, { useState } from 'react';\nimport { DBRepository } from '../repositories/db-repository';\nimport { ShopTableEditor } from './ShopTableEditor';\n\n\nexport function ShopElementComponent({ appContext, element, parentExposedFuntions }) {\n\n    const [editMode, setEditMode] = useState(false);\n    let currentEditorItems = null;\n    let hasChangedAtLeastOneTime = false;\n    const childFunctions = {}\n\n    const edit = () => {\n        setEditMode(true);\n    }\n\n    const save = () => {\n        if (!hasChangedAtLeastOneTime) {\n            discardChanges();\n            return;\n        }\n        element.items = currentEditorItems;\n        const repo = appContext.getRepository(DBRepository);\n        repo.save();\n        setEditMode(false);\n    }\n\n    const discardChanges = () => {\n        currentEditorItems = [];\n        setEditMode(false);\n    }\n\n    const onItemsChange = (items) => {\n        hasChangedAtLeastOneTime = true;\n        currentEditorItems = items;\n    }\n\n    const addItem = () => {\n        childFunctions.addItem();\n    }\n\n    parentExposedFuntions.edit = edit;\n\n    return <div className=\"ParagraphElement\">\n        {\n            editMode ? <>\n                <button onClick={addItem}>\n                    <span role='img' aria-label='plus'>➕</span> Agregar objeto\n                </button>\n                <button onClick={save}>\n                    <span role='img' aria-label='save'>💾</span> Guardar cambios\n                </button>\n                <button onClick={discardChanges}>\n                    <span role='img' aria-label='cancel'>❌</span> Descartar cambios\n                </button>\n            </> : <></>\n        }\n        <br></br>\n        {\n            editMode ?\n                <>\n                    <ShopTableEditor items={element.items} onItemsChange={onItemsChange}\n                        parentExposedFuntions={childFunctions} />\n                </> :\n                <table className=\"shopTable\">\n                    <thead>\n                        <tr>\n                            <th>Objeto</th>\n                            <th>Precio</th>\n                            <th>Cantidad disponible</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            element.items.map(x => <tr key={x.id}\n                                className={\n                                    element.items.indexOf(x) % 2 ?\n                                        'oddRow' : 'evenRow'\n                                }>\n                                <td>{\n                                    x.link ?\n                                        <a href={x.link}>{x.title}</a> :\n                                        <span>{x.title}</span>\n                                }</td>\n                                <td>{x.price}</td>\n                                <td>{x.amount}</td>\n                            </tr>)\n                        }\n                    </tbody>\n                </table>\n\n        }\n    </div>;\n}","import React from 'react';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function EditIcon() {\n    return <FontAwesomeIcon icon={faEdit} color={'#574a6b'} />\n}","import React from 'react';\nimport { faLink } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport function CopyLinkIcon() {\n    return <FontAwesomeIcon icon={faLink} color={'#424242'} />\n}","import '../styles/ViewElement.css';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { ParagraphElementComponent } from './ParagraphElementComponent';\nimport { ShopElementComponent } from './ShopElementComponent';\nimport { RenameIcon } from './icons/RenameIcon';\nimport { EditIcon } from './icons/EditIcon';\nimport { CopyLinkIcon } from './icons/CopyLinkIcon';\nimport { DeleteIcon } from './icons/DeleteIcon';\n\nexport function ViewElement({ appContext }) {\n    const navigate = useNavigate();\n    const { narrativeContextId, narrativeCategoryId, elementId } = useParams();\n    const [element, setElement] = useState(null);\n    const childFuntions = {};\n\n    useEffect(() => {\n        const setNavigationButtons = () => {\n            const narrativeCategory = appContext.getDB().getNarrativeContext(narrativeContextId)\n                .getNarrativeCategory(narrativeCategoryId);\n            const prevElement = narrativeCategory.getPrevElement(elementId, narrativeContextId);\n            const nextElement = narrativeCategory.getNextElement(elementId, narrativeContextId);\n            if (prevElement) {\n                appContext.setBackButtonUrl(`/narrative-context/${narrativeContextId}/${narrativeCategoryId}/${prevElement.id}`);\n            } else {\n                appContext.setBackButtonUrl(`/narrative-context/${narrativeContextId}`);\n            }\n            if (nextElement) {\n                appContext.setForwardButtonUrl(`/narrative-context/${narrativeContextId}/${narrativeCategoryId}/${nextElement.id}`);\n            } else {\n                appContext.setForwardButtonUrl(null);\n            }\n        }\n        appContext.setNarrativeContextById(narrativeContextId);\n\n        const obtainedElement = appContext.getDB().getNarrativeContext(narrativeContextId)\n            .getNarrativeCategory(narrativeCategoryId).findElementAnywhere(elementId);\n        setElement(obtainedElement);\n\n        setNavigationButtons();\n    }, [appContext, narrativeContextId, narrativeCategoryId, elementId]);\n\n\n    const copyRelativeLink = () => {\n        const relLink = `${window.location.origin}/narrative-context/${narrativeContextId}/${narrativeCategoryId}/${elementId}`;\n        navigator.clipboard.writeText(relLink);\n    }\n\n    const editName = () => {\n        const name = window.prompt('Ingresa el nuevo nombre del elemento', element.name);\n        if (name) {\n            const obtainedElement = appContext.getDB().getNarrativeContext(narrativeContextId)\n                .getNarrativeCategory(narrativeCategoryId).getElement(elementId);\n            obtainedElement.name = name;\n            appContext.saveDB();\n            setElement({ ...obtainedElement });\n            setTimeout(() => {\n                setElement(obtainedElement);\n            }, 0);\n        }\n    }\n\n    const editBody = () => {\n        childFuntions.edit();\n    }\n\n    const deleteElement = () => {\n        const shouldDelete = window.confirm(`Estas seguro de eliminar el elemento ${element.name}`);\n        if (!shouldDelete) return;\n        const narrativeCategory = appContext.getDB().getNarrativeContext(narrativeContextId)\n            .getNarrativeCategory(narrativeCategoryId);\n        narrativeCategory.removeElement(element.id);\n        appContext.saveDB();\n        navigate(`/narrative-context/${narrativeContextId}`);\n    }\n\n    return <div className=\"ViewElement\">\n        {\n            element ? <>\n                <div className='flex viewElementTitleBar'>\n                    <h2 className='flex2'>{element.name}</h2>\n                    <div className='textRight viewElementTitleButtons'>\n                        <button onClick={editName}>\n                            <RenameIcon />\n                            <span className='tooltip'>Renombrar</span>\n                        </button>\n                        <button onClick={editBody}>\n                            <EditIcon />\n                            <span className='tooltip'>Editar</span>\n                        </button>\n                        <button onClick={copyRelativeLink}>\n                            <CopyLinkIcon />\n                            <span className='tooltip'>Copiar enlace</span>\n                        </button>\n                        <button onClick={deleteElement}>\n                            <DeleteIcon />\n                            <span className='tooltip'>Eliminar</span>\n                        </button>\n                    </div>\n                </div>\n                {\n                    {\n                        'paragraph': <ParagraphElementComponent key={element.id}\n                            appContext={appContext} element={element} onDelete={deleteElement} parentExposedFuntions={childFuntions}\n                        />,\n                        'shop': <ShopElementComponent key={element.id}\n                            appContext={appContext} element={element} onDelete={deleteElement} parentExposedFuntions={childFuntions}\n                        />,\n                    }[element.type]\n                }\n\n            </> : <></>\n        }\n\n    </div>;\n}","import '../styles/Navbar.css';\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAngleLeft, faAngleRight, faDiceD20 } from '@fortawesome/free-solid-svg-icons';\n\nexport function Navbar({ appContext }) {\n\n    const [backButtonUrl, setBackButtonUrl] = useState('/');\n    const [forwardButtonUrl, setForwardButtonUrl] = useState('/');\n    const [narrativeContext, setNarrativeContext] = useState(null);\n\n    const setNarrativeContextById = (narrativeContextId) => {\n        let obtainedNarrativeContext = null;\n        if (narrativeContextId) {\n            obtainedNarrativeContext = appContext.getDB().getNarrativeContext(narrativeContextId);\n        }\n        setNarrativeContext(obtainedNarrativeContext);\n    }\n\n    appContext.setBackButtonUrl = setBackButtonUrl;\n    appContext.setForwardButtonUrl = setForwardButtonUrl;\n    appContext.setNarrativeContextById = setNarrativeContextById;\n\n    return <div className='Navbar'>\n        <div className='navbarContent'>\n            <div className='flex1'>\n                <Link to={`/`} id='homeTitleLink'>\n                    <FontAwesomeIcon icon={faDiceD20} /> Inicio\n                </Link>\n            </div>\n            <div className='textCenter'>\n                {\n                    narrativeContext ?\n                        <Link to={`/narrative-context/${narrativeContext.id}`} id='narrativeContextTitleLink'>{narrativeContext.name}</Link> :\n                        <></>\n                }\n            </div>\n            <div className='flex2 textRight' id='nabvarNavigationIcons'>\n                <span className={`iconButton ${backButtonUrl ? 'iconButtonActive' : 'iconButtonInactive'\n                    }`}>\n                    {\n\n                        backButtonUrl ? <Link to={backButtonUrl}>\n                            <FontAwesomeIcon icon={faAngleLeft} />\n                        </Link> :\n                            <FontAwesomeIcon icon={faAngleLeft} className='inactiveLink' />\n                    }\n                </span>\n                <span> </span>\n                <span className={`iconButton ${forwardButtonUrl ? 'iconButtonActive' : 'iconButtonInactive'\n                    }`}>\n                    {\n                        forwardButtonUrl ? <Link to={forwardButtonUrl}>\n                            <FontAwesomeIcon icon={faAngleRight} />\n                        </Link> :\n                            <FontAwesomeIcon icon={faAngleRight} className='inactiveLink' />\n                    }\n                </span>\n            </div>\n        </div>\n    </div>;\n}","import { WebApiRepository } from './web-api-repository.js';\nimport { WEB_API_URL } from '../config.js';\n\nexport class AuthRepository extends WebApiRepository {\n    \n    onLogin = () => {};\n    onLogout = () => {};\n\n    async login(credentials) {\n        const response = await this._post(`/auth/login`, credentials);\n        localStorage.setItem('token', response.token);\n        localStorage.setItem('tokenUsername', credentials.username);\n        this.onLogin();\n    }\n\n    isAuthenticated() {\n        return !!localStorage.getItem('token');\n    }\n\n    getAuthenticatedUsername() {\n        return localStorage.getItem('tokenUsername');\n    }\n\n    logout() {\n        localStorage.removeItem('token');\n        localStorage.removeItem('tokenUsername');\n        this.onLogout();\n    }\n}","import '../styles/LoginView.css';\nimport React, { useEffect, useState } from 'react';\nimport { AuthRepository } from '../repositories/auth-repository';\n\nexport function LoginView({ appContext }) {\n    const [username, setUsername] = useState(null);\n    const [password, setPassword] = useState(null);\n\n    useEffect(() => {\n        appContext.setBackButtonUrl(null);\n        appContext.setForwardButtonUrl(null);\n    }, [appContext]);\n\n    const login = async () => {\n        try {\n            await appContext.getRepository(AuthRepository).login({\n                username, password\n            });\n        } catch {\n            alert('Usuario o contreseña inválidos!');\n        }        \n    }\n\n    return <form className=\"LoginView\" onSubmit={e => e.preventDefault()}>\n        <input type='text' name='username' onChange={(event) => setUsername(event.target.value)} placeholder='Usuario' />\n        <input type='password' name='password' onChange={(event) => setPassword(event.target.value)} placeholder='Contraseña' />\n        <button type='submit' onClick={login}>Iniciar sesión</button>\n    </form>;\n\n}","import React, { useEffect } from 'react';\nimport { AuthRepository } from '../repositories/auth-repository';\n\nexport function LogoutView({ appContext }) {\n\n    useEffect(() => {\n        appContext.setBackButtonUrl(null);\n        appContext.setForwardButtonUrl(null);\n        appContext.getRepository(AuthRepository).logout();\n    }, [appContext]);\n\n    return <></>;\n\n}","import './styles/App.css';\nimport './styles.css';\nimport React, { useState } from 'react';\nimport {\n    BrowserRouter as Router,\n    Routes,\n    Route,\n    Navigate,\n    //Link\n} from 'react-router-dom';\nimport { Home } from './components/Home';\nimport { CreateNarrativeContext } from './components/CreateNarrativeContext';\nimport { ViewNarrativeContext } from './components/ViewNarrativeContext';\nimport { ViewElement } from './components/ViewElement';\nimport { Navbar } from './components/Navbar';\nimport { LoginView } from './components/LoginView';\nimport { AuthRepository } from './repositories/auth-repository';\nimport { LogoutView } from './components/LogoutView';\n\nexport function App({ appContext }) {\n\n    const authRepo = appContext.getRepository(AuthRepository);\n\n    const [userLogged, setUserLogged] = useState(authRepo.isAuthenticated());\n\n    return <div className='App'>\n        <Router>\n            <Navbar appContext={appContext} />\n            <div className='RouterContainer'>\n                <Routes>\n\n                    {userLogged ?\n                        <>\n                            <Route path='/create-narrative-context' element={<CreateNarrativeContext appContext={appContext} />} />\n                            <Route path='/narrative-context/:narrativeContextId/:narrativeCategoryId/:elementId' element={<ViewElement appContext={appContext} />} />\n                            <Route path='/narrative-context/:narrativeContextId' element={<ViewNarrativeContext appContext={appContext} />} />\n                            <Route path='/logout' element={<LogoutView appContext={appContext} />} />\n                            <Route path='/' element={<Home appContext={appContext} />} />\n                            <Route path=\"*\" element={<Navigate to ='/' />}/>\n                        </> : <>\n                            <Route path='/login' element={<LoginView appContext={appContext} />} />\n                            <Route path=\"*\" element={<Navigate to ='/login' />}/>\n                            <Route path=\"/\" element={<Navigate to ='/login' />}/>\n                        </>\n                    }\n                    \n                </Routes>\n            </div>\n        </Router>\n    </div>;\n}","import { DBRepository } from './repositories/db-repository';\n\nexport class AppContext {\n\n    _repositories = null;\n    \n    constructor() {\n        this._repositories = {}\n    }\n\n    getRepository(repositoryClass) {\n        if (!this._repositories[repositoryClass]){\n            this._repositories[repositoryClass] = new repositoryClass();\n        }\n        return this._repositories[repositoryClass];\n    }\n\n    setBackButtonUrl(url) {}\n\n    setForwardButtonUrl(url) {}\n\n    setNarrativeContextById(narrativeContextId) {}\n\n    getDB() {\n        return DBRepository._db;\n    }\n\n    saveDB() {\n        DBRepository._save();\n    }\n}","import { DBRepository } from '../repositories/db-repository';\n\nexport class DataCorruptionPreventer {\n\n    _appContext = null;\n    _interval = null;\n    _INTERVAL_TIME = 2000;\n    _lastDBSaveTime = null;\n    _LAST_SAVE_DATE_KEY = 'last_save_date';\n\n    constructor(appContext) {\n        this._appContext = appContext;\n        this._lastDBSaveTime = this._getStoredDate();\n        this._registerAfterSaveHook();\n        this._registerOnDirtyDBCallback();\n    }\n\n    _registerAfterSaveHook() {\n        this._appContext.getRepository(DBRepository).registerAfterSaveHook(() => {\n            this._updateLastSaveInfo();\n        });\n    }\n\n    _registerOnDirtyDBCallback() {\n        this._appContext.getRepository(DBRepository).registerOnDirtyDBCallback(() => {\n            this._onDirtyDB();\n        });\n    }\n\n    _updateLastSaveInfo() {\n        const saveDate = new Date();\n        this._lastDBSaveTime = saveDate;\n        localStorage.setItem(this._LAST_SAVE_DATE_KEY, saveDate.toString());\n    }\n\n    _getStoredDate() {\n        const lastSaveDateStr = localStorage.getItem(this._LAST_SAVE_DATE_KEY);\n        if (!lastSaveDateStr) return null;\n        return new Date(lastSaveDateStr);\n    }\n\n    _isWorkingDirty() {\n        const storedDate = this._getStoredDate();\n        return (storedDate && !this._lastDBSaveTime) || (storedDate && this._lastDBSaveTime && this._lastDBSaveTime < storedDate);\n    }\n\n    start() {\n        this._interval = setInterval(() => {\n            if (this._isWorkingDirty()) {\n                this._appContext.getRepository(DBRepository).enableSavingPrevention();\n                clearInterval(this._interval);\n                this._onDirtyDB();\n            }\n        }, this._INTERVAL_TIME)\n    }\n\n    _onDirtyDB() {\n        const shouldReload = window.confirm('Usted esta trabajando con una version desactualizada de la base de datos local y no podra guardar cambios en esta.' +\n            ' Por favor recargue la aplicación para poder volver a utilizarla con normalidad o haga click en aceptar para hacerlo automáticamente.');\n        if (shouldReload) window.location.reload();\n    }\n}","import './index.css';\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport { App } from './App';\nimport { AppContext } from './app-context';\nimport { DataCorruptionPreventer } from './services/data-corruption-preventer';\nimport { DBRepository } from './repositories/db-repository';\nimport { AuthRepository } from './repositories/auth-repository';\n\nconst appContext = new AppContext();\nconst dataCorruptionPreventer = new DataCorruptionPreventer(appContext);\nconst dbRepo = appContext.getRepository(DBRepository);\nconst authRepo = appContext.getRepository(AuthRepository);\n\nconst renderApp = () => {\n    ReactDom.render(\n        <App appContext={appContext} />,\n        document.getElementById('root')\n    );\n}\n\n// Just download the remote DB if use is logged in\nconst start = async () => {\n    try {\n        if (authRepo.isAuthenticated()) {\n            await dbRepo.tryGetCloudDB();\n        }\n        dataCorruptionPreventer.start();\n        renderApp();\n    } catch {\n        alert('Ha ocurrido un error al sincronizar con el servidor, por favor refresca la página!');\n    }\n}\n\nauthRepo.onLogin = () => {\n    window.location = '/';\n}\n\nauthRepo.onLogout = () => {\n    window.location = '/login';\n}\n\nstart();"],"sourceRoot":""}